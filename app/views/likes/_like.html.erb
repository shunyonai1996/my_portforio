<% if logged_in? %>

  <% unless micropost.like_user(current_user.id).blank? %>
    <%= link_to micropost_like_path(micropost_id: micropost.id ,id: micropost.likes[0].id), method: :delete, remote: true do %>
      <div class="vertical_like">
        <i class="material-icons red-text">favorite</i>
        <span class="red-text">
          <%= micropost.likes_count %>
        </span>
      </div>
    <% end %>
  <% else %>
    <%= link_to micropost_likes_path(micropost.id), method: :post, remote: true do %>
      <div class="vertical_like">
        <i class="material-icons grey-text text-darken-2">favorite_border</i>
        <span class="grey-text text-darken-2">
          <%= micropost.likes_count %>
        </span>
      </div>
    <% end %>
  <% end %>

<% else %>

  <% if micropost.likes_count > 0 %>
    <div class="vertical_like">
      <i class="material-icons red-text">favorite</i>
      <span class="red-text">
        <%= micropost.likes_count %>
      </span>
    </div>
  <% else %>
    <div class="vertical_like">
      <i class="material-icons grey-text text-darken-2">favorite_border</i>
      <span class="grey-text text-darken-2">
        <%= micropost.likes_count %>
      </span>
    </div>
  <% end %>

<% end %>